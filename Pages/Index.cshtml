@page
@model IndexModel
@{
    ViewData["Title"] = "ContentVisor Demo";
}

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"]</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .card {
            margin: 10px;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border: none;
        }

        .video-card {
            transition: all 0.3s ease;
            cursor: pointer;
            margin-bottom: 30px; /* Добавляем отступ снизу для видео */
        }

            .video-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 15px rgba(0,0,0,0.2);
            }

            .video-card .card-img-top {
                height: 180px;
                object-fit: cover;
                border-radius: 10px 10px 0 0;
            }

        .category-card {
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

            .category-card:hover {
                transform: translateY(-2px);
                border-color: #007bff;
            }

            .category-card.selected {
                border-color: #007bff;
                background-color: #f8f9fa;
            }

        .channel-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }

            .channel-item:hover {
                background-color: #f8f9fa;
            }

            .channel-item.selected {
                background-color: #e3f2fd;
                border-left: 4px solid #007bff;
            }

        .btn {
            margin-top: 10px;
        }

        .progress {
            height: 8px;
            margin: 5px 0;
        }

        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 80px 0;
            border-radius: 0 0 30px 30px;
            margin-bottom: 50px;
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .btn-feature {
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

            .btn-feature:hover {
                transform: translateY(-3px);
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            }

        /* Новые стили для выравнивания карточек функций */
        .feature-card {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

            .feature-card .card-body {
                flex: 1;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
            }

        /* Увеличиваем подпись под заголовком видео */
        .video-section-subtitle {
            font-size: 1.2rem;
            margin-bottom: 2rem;
        }

        /* Добавляем отступ внизу контейнера */
        .main-container {
            padding-bottom: 50px;
        }
    </style>
</head>
<body>
    <!-- Герой секция -->
    <div class="hero-section">
        <div class="container text-center">
            <h1 class="display-3 fw-bold">🎬 ContentVisor Demo</h1>
            <p class="lead fs-4">Мощная платформа для анализа трендового контента</p>
            <p class="fs-5 opacity-90">Аналитика видео, метрики вовлеченности, трендовые инсайты</p>
        </div>
    </div>

    <div class="container main-container">
        <!-- Основные функции -->
        <div class="row mt-5">
            <div class="col-md-6 mb-4">
                <div class="card text-center feature-card">
                    <div class="card-body">
                        <div>
                            <div class="feature-icon">📊</div>
                            <h3 class="card-title">Общая аналитика</h3>
                            <p class="card-text fs-5">Полная статистика по всем трендовым видео и категориям</p>
                        </div>
                        <button onclick="openGlobalDashboard()" class="btn btn-primary btn-feature">Открыть общую статистику</button>
                    </div>
                </div>
            </div>

            <div class="col-md-6 mb-4">
                <div class="card text-center feature-card">
                    <div class="card-body">
                        <div>
                            <div class="feature-icon">🔍</div>
                            <h3 class="card-title">Детальный анализ</h3>
                            <p class="card-text fs-5">Выберите категории или каналы для глубокого анализа</p>
                        </div>
                        <button onclick="openContentSelector()" class="btn btn-success btn-feature">Анализ контента</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Секция ТОП-5 трендовых видео -->
        <div class="row mt-5">
            <div class="col-12">
                <h2>🔥 ТОП-5 трендовых видео</h2>
                <p class="text-muted video-section-subtitle">Самые популярные видео этой недели</p>
            </div>
        </div>

        <div class="row">
            <!-- Видео 1 -->
            <div class="col-md-4">
                <div class="card video-card">
                    <img src="/images/thumb1.jpg" class="card-img-top" alt="Видео 1">
                    <div class="card-body">
                        <h5 class="card-title">Обзор новых фич iOS</h5>
                        <p class="card-text">
                            <span class="badge bg-success">📈 2.5M просмотров</span><br>
                            <small class="text-muted">Вовлеченность: 88%</small>
                        </p>
                        <div class="progress mb-2">
                            <div class="progress-bar bg-success" style="width: 72%"></div>
                        </div>
                        <small class="text-muted">Досмотрели до конца: 72%</small>
                        <div class="mt-2">
                            <small class="text-muted">👥 18-24 года • 👍 125K • 💬 2.8K</small>
                        </div>
                        <div class="mt-3">
                            <button onclick="openVideo(1)" class="btn btn-outline-primary btn-sm">Смотреть видео</button>
                            <button onclick="openVideoAnalytics(1)" class="btn btn-outline-info btn-sm">Аналитика</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Видео 2 -->
            <div class="col-md-4">
                <div class="card video-card">
                    <img src="/images/thumb2.jpg" class="card-img-top" alt="Видео 2">
                    <div class="card-body">
                        <h5 class="card-title">Тренды моды 2025</h5>
                        <p class="card-text">
                            <span class="badge bg-warning">📈 1.8M просмотров</span><br>
                            <small class="text-muted">Вовлеченность: 92%</small>
                        </p>
                        <div class="progress mb-2">
                            <div class="progress-bar bg-success" style="width: 85%"></div>
                        </div>
                        <small class="text-muted">Досмотрели до конца: 85%</small>
                        <div class="mt-2">
                            <small class="text-muted">👥 25-34 года • 👍 95K • 💬 1.5K</small>
                        </div>
                        <div class="mt-3">
                            <button onclick="openVideo(2)" class="btn btn-outline-primary btn-sm">Смотреть видео</button>
                            <button onclick="openVideoAnalytics(2)" class="btn btn-outline-info btn-sm">Аналитика</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Видео 3 -->
            <div class="col-md-4">
                <div class="card video-card">
                    <img src="/images/thumb3.jpg" class="card-img-top" alt="Видео 3">
                    <div class="card-body">
                        <h5 class="card-title">Гейминг обзор</h5>
                        <p class="card-text">
                            <span class="badge bg-info">📈 3.1M просмотров</span><br>
                            <small class="text-muted">Вовлеченность: 78%</small>
                        </p>
                        <div class="progress mb-2">
                            <div class="progress-bar bg-warning" style="width: 68%"></div>
                        </div>
                        <small class="text-muted">Досмотрели до конца: 68%</small>
                        <div class="mt-2">
                            <small class="text-muted">👥 13-17 лет • 👍 180K • 💬 4.2K</small>
                        </div>
                        <div class="mt-3">
                            <button onclick="openVideo(3)" class="btn btn-outline-primary btn-sm">Смотреть видео</button>
                            <button onclick="openVideoAnalytics(3)" class="btn btn-outline-info btn-sm">Аналитика</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Видео 4 -->
            <div class="col-md-6">
                <div class="card video-card">
                    <img src="/images/thumb4.jpg" class="card-img-top" alt="Видео 4">
                    <div class="card-body">
                        <h5 class="card-title">Кулинарный хак</h5>
                        <p class="card-text">
                            <span class="badge bg-danger">📈 4.2M просмотров</span><br>
                            <small class="text-muted">Вовлеченность: 95%</small>
                        </p>
                        <div class="progress mb-2">
                            <div class="progress-bar bg-success" style="width: 91%"></div>
                        </div>
                        <small class="text-muted">Досмотрели до конца: 91%</small>
                        <div class="mt-2">
                            <small class="text-muted">👥 25-44 года • 👍 210K • 💬 5.1K</small>
                        </div>
                        <div class="mt-3">
                            <button onclick="openVideo(4)" class="btn btn-outline-primary btn-sm">Смотреть видео</button>
                            <button onclick="openVideoAnalytics(4)" class="btn btn-outline-info btn-sm">Аналитика</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Видео 5 -->
            <div class="col-md-6">
                <div class="card video-card">
                    <img src="/images/thumb5.jpg" class="card-img-top" alt="Видео 5">
                    <div class="card-body">
                        <h5 class="card-title">Фитнес тренировка</h5>
                        <p class="card-text">
                            <span class="badge bg-primary">📈 1.5M просмотров</span><br>
                            <small class="text-muted">Вовлеченность: 85%</small>
                        </p>
                        <div class="progress mb-2">
                            <div class="progress-bar bg-success" style="width: 79%"></div>
                        </div>
                        <small class="text-muted">Досмотрели до конца: 79%</small>
                        <div class="mt-2">
                            <small class="text-muted">👥 18-35 лет • 👍 75K • 💬 1.2K</small>
                        </div>
                        <div class="mt-3">
                            <button onclick="openVideo(5)" class="btn btn-outline-primary btn-sm">Смотреть видео</button>
                            <button onclick="openVideoAnalytics(5)" class="btn btn-outline-info btn-sm">Аналитика</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно выбора контента -->
    <div class="modal fade" id="contentModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">🔍 Выбор контента для анализа</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <ul class="nav nav-tabs" id="contentTabs">
                        <li class="nav-item">
                            <a class="nav-link active" onclick="showTab('categories')">📂 По категориям</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" onclick="showTab('channels')">📺 Все каналы</a>
                        </li>
                    </ul>

                    <div class="tab-content mt-3">
                        <!-- Вкладка категорий -->
                        <div id="categoriesTab" class="tab-pane active">
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <div class="card category-card" onclick="selectCategory('food')">
                                        <div class="card-body text-center">
                                            <h5>🍕 Еда</h5>
                                            <small class="text-muted">12 каналов</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card category-card" onclick="selectCategory('sports')">
                                        <div class="card-body text-center">
                                            <h5>⚽ Спорт</h5>
                                            <small class="text-muted">8 каналов</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card category-card" onclick="selectCategory('gaming')">
                                        <div class="card-body text-center">
                                            <h5>🎮 Игры</h5>
                                            <small class="text-muted">15 каналов</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card category-card" onclick="selectCategory('gardening')">
                                        <div class="card-body text-center">
                                            <h5>🌿 Садоводство</h5>
                                            <small class="text-muted">6 каналов</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card category-card" onclick="selectCategory('tech')">
                                        <div class="card-body text-center">
                                            <h5>💻 Технологии</h5>
                                            <small class="text-muted">10 каналов</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card category-card" onclick="selectCategory('fashion')">
                                        <div class="card-body text-center">
                                            <h5>👗 Мода</h5>
                                            <small class="text-muted">9 каналов</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Вкладка всех каналов -->
                        <div id="channelsTab" class="tab-pane">
                            <div class="mb-3">
                                <input type="text" class="form-control" id="channelSearch" placeholder="🔍 Поиск каналов..." onkeyup="searchChannels()">
                            </div>
                            <div class="channels-list" style="max-height: 400px; overflow-y: auto;">
                                <!-- Список каналов будет генерироваться динамически -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Отмена</button>
                    <button type="button" class="btn btn-primary" onclick="applyContentSelection()">Применить выбор</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function openGlobalDashboard() {
            window.location.href = '/GlobalDashboard';
        }

        function openContentSelector() {
            window.location.href = '/ContentSelector';
        }

        function openVideo(videoId) {
            window.location.href = `/Video?id=${videoId}`;
        }

        function openVideoAnalytics(videoId) {
            window.location.href = `/Dashboard?id=${videoId}`;
        }

        function openCategoryAnalytics(category) {
            window.location.href = `/CategoryAnalytics?category=${category}`;
        }

        // Анимации карточек видео
        document.addEventListener('DOMContentLoaded', function () {
            const cards = document.querySelectorAll('.video-card');
            cards.forEach(card => {
                card.addEventListener('mouseenter', function () {
                    this.style.transform = 'translateY(-5px)';
                    this.style.boxShadow = '0 8px 15px rgba(0,0,0,0.2)';
                });

                card.addEventListener('mouseleave', function () {
                    this.style.transform = 'translateY(0)';
                    this.style.boxShadow = '0 4px 6px rgba(0,0,0,0.1)';
                });
            });
        });
    </script>
</body>
</html>